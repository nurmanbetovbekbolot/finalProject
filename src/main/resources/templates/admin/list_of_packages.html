<!DOCTYPE html>
<layout:html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.w3.org/1999/xhtml" lang="en"
             layout:decorate="~{layout}">
    <div layout:fragment="content">
        <div class="container" style="padding-top: 50px">
            <div class="row">
                <div class="col-lg-11">
                    <h3 style="text-align: center; font-family: 'Gilroy Light', sans-serif; color: #2b3b55">
                        <span class="iconify"
                              data-inline="false"
                              data-icon="si-glyph:document-bullet-list"
                              style="color: #2b3b55;font-size: 50px; margin-right: 30px">
                        </span>
                        Список пакетов
                    </h3>
                </div>
                <div class="col-lg-1">
                    <a th:href="'/package/form'">
                        <span class="iconify" data-inline="false" data-icon="bi:plus-circle"
                              style="color: #2b3b55;font-size: 40px;"></span>
                    </a>
                </div>
            </div>
        </div>
        <br>
        <div class="container">
            <div class="accordion md-accordion" th:id="'accordionEx'+${p.id}" role="tablist"
                 aria-multiselectable="true"
                 th:each="p : ${packageList}">
                <div class="card card_acc">
                    <div style="outline:2px solid #2b3b55; background: #CDD3DC" class="card-header c-h" role="tab"
                         th:id="'headingOne'+${p.id}">
                        <div class="row">
                            <div class="col-lg-10">
                                <h5 class="mb-0" style="color: #2b3b55;font-family: 'Gilroy Light'"
                                    th:text="${p.title}">
                                </h5>
                            </div>
                            <div class="col-lg-2">
                                <div class="row" style="position: absolute " >
                                    <a data-toggle="collapse"
                                       th:attr="data-parent='#accordionEx'+${p.id}"
                                       th:href="'#collapseOne'+${p.id}"
                                       aria-expanded="true"
                                       aria-controls="collapseOne1">
                                        <span class="iconify centered" data-inline="false"
                                              data-icon="dashicons:arrow-down-alt2"
                                              style="color: #2b3b55; font-size:25px;">
                                        </span>
                                    </a>

                                    <a th:href="'/package/' + ${p.id}"
                                       type="button" style="color: white;"
                                       class="btn btn-link">
                                        <span class="iconify" data-icon="fa-solid:edit"
                                              style="color: #2b3b55;font-size:25px;"></span>
                                    </a>

                                    <a th:href="'/package/'+${p.id}+'/category/list'"
                                       title="Список услуг этого пакета" class="btn btn-link">
                                        <span class="iconify"
                                              data-icon="ant-design:unordered-list-outlined"
                                              data-inline="false"
                                              style="color: #2b3b55;font-size:25px;">
                                        </span>
                                    </a>
                                    <button type="button" style="color: white;"
                                            class="btn btn-link" data-toggle="modal"
                                            th:attr="data-target='#recordDeleteModal'+${p.id}">
                                        <span class="iconify" data-inline="false"
                                              data-icon="ant-design:delete-filled"
                                              style="color: #2b3b55;font-size:25px;">
                                        </span>
                                    </button>
                                    <div data-backdrop="false" class="modal fade"
                                         th:attr="id='recordDeleteModal'+${p.id}" tabindex="-1" role="dialog"
                                         aria-labelledby="recordDeleteModalLabel" aria-hidden="true">
                                        <div class="modal-dialog" role="document">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h5 class="modal-title" id="recordDeleteModalLabel">
                                                        Удаление пакета</h5>
                                                    <button type="button" class="close" data-dismiss="modal"
                                                            aria-label="Close">
                                                        <span aria-hidden="true">&times;</span>
                                                    </button>
                                                </div>
                                                <div class="modal-body">
                                                    <label>Вы действительно хотите удалить?</label>
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-secondary"
                                                            data-dismiss="modal">Нет
                                                    </button>
                                                    <form th:action="@{/package/delete/{id}(id = ${p.id})}"
                                                          method="post">
                                                        <button type="submit" class="btn btn-info m-t-10">Да</button>
                                                    </form>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div th:id="'collapseOne'+${p.id}" class="collapse show card" role="tabpanel"
                         th:attr="data-parent='#accordionEx'+${p.id}"
                         aria-labelledby="headingOne1">
                        <div class="card-body">
                            <p class="card-text" th:text="${p.description}">Описание</p>
                        </div>
                    </div>
                </div>
            </div>

        </div>
        <br><br>

        <div class="container con3">
            <ul class="pagination justify-content-center">
                <li class="page-item" th:if="${packageList.hasPrevious()}">
                    <a class="page-link" th:href="@{/package/list(page=${packageList.number -1})}"> < </a>
                </li>
                <th:block th:each="i: ${#numbers.sequence(0, packageList.totalPages - 1)}">
                    <li class="page-item active" th:if="${packageList.number == i}">
                        <a th:href="@{/package/list(page=${i})}" class="page-link ">[[${i}+1]]</a>
                    </li>
                    <li class="page-item" th:unless="${packageList.number == i}">

                        <a th:href="@{/package/list(page=${i})}" class="page-link">[[${i}+1]]</a>
                    </li>
                </th:block>
                <li class="page-item" th:if="${packageList.hasNext()}">
                    <a class="page-link" th:href="@{/package/list(page=${packageList.number+1})}"> > </a>
                </li>
            </ul>
        </div>
    </div>
</layout:html>